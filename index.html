<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Black Hole Simulation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
    margin: 0;
    padding: 0;
    overflow: hidden;
    background: radial-gradient(circle at center, #000020, #000);
}
canvas {
    display: block;
}
</style>
</head>
<body>

<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function resize() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

// Black hole
const bh = {
    x: canvas.width / 2,
    y: canvas.height / 2,
    r: 90
};

let angle = 0;

// Stars
const stars = Array.from({ length: 400 }, () => ({
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    r: Math.random() * 1.5
}));

// Matter particles
const particles = Array.from({ length: 300 }, spawnParticle);

function spawnParticle() {
    const d = 250 + Math.random() * 300;
    const a = Math.random() * Math.PI * 2;
    return {
        angle: a,
        dist: d,
        speed: 0.002 + Math.random() * 0.003
    };
}

function drawStars() {
    ctx.fillStyle = "white";
    stars.forEach(s => {
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
        ctx.fill();
    });
}

function drawAccretionDisk() {
    for (let i = 0; i < 140; i++) {
        ctx.beginPath();
        ctx.strokeStyle = `rgba(255,140,80,0.012)`;
        ctx.lineWidth = 2;
        ctx.arc(
            bh.x,
            bh.y,
            bh.r + 40 + i,
            angle,
            angle + Math.PI * 1.5
        );
        ctx.stroke();
    }
}

function drawLens() {
    const g = ctx.createRadialGradient(
        bh.x, bh.y, bh.r,
        bh.x, bh.y, bh.r + 220
    );
    g.addColorStop(0, "rgba(255,255,255,0.3)");
    g.addColorStop(0.4, "rgba(255,150,80,0.2)");
    g.addColorStop(0.7, "rgba(0,120,255,0.12)");
    g.addColorStop(1, "rgba(0,0,0,0)");

    ctx.fillStyle = g;
    ctx.beginPath();
    ctx.arc(bh.x, bh.y, bh.r + 220, 0, Math.PI * 2);
    ctx.fill();
}

function drawParticles() {
    ctx.fillStyle = "rgba(255,200,150,0.85)";
    particles.forEach(p => {
        p.angle += p.speed;
        p.dist -= 0.3;

        if (p.dist < bh.r) {
            Object.assign(p, spawnParticle());
        }

        const x = bh.x + Math.cos(p.angle) * p.dist;
        const y = bh.y + Math.sin(p.angle) * p.dist;

        ctx.beginPath();
        ctx.arc(x, y, 1.5, 0, Math.PI * 2);
        ctx.fill();
    });
}

function drawEventHorizon() {
    ctx.beginPath();
    ctx.arc(bh.x, bh.y, bh.r, 0, Math.PI * 2);
    ctx.fillStyle = "black";
    ctx.shadowColor = "black";
    ctx.shadowBlur = 50;
    ctx.fill();
    ctx.shadowBlur = 0;
}

function drawSingularity() {
    ctx.beginPath();
    ctx.arc(bh.x, bh.y, 4, 0, Math.PI * 2);
    ctx.fillStyle = "white";
    ctx.shadowColor = "white";
    ctx.shadowBlur = 15;
    ctx.fill();
    ctx.shadowBlur = 0;
}

function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    drawStars();
    drawAccretionDisk();
    drawLens();
    drawParticles();
    drawEventHorizon();
    drawSingularity();

    angle += 0.0025;
    requestAnimationFrame(animate);
}

animate();
</script>

</body>
</html>
